import{t as e}from"./CategorySelector-B_CRrh-c.js";import{a as t,i as n,l as r}from"./constants-BhlR-DOK.js";import{D as i,O as a,k as o,l as s}from"./index-B_KWcYHw.js";import{a as c,i as l,n as u,r as d,t as f}from"./TextAreaField-Iws14oK0.js";import{t as p}from"./button-8WxtMVYD.js";var m=o(),h=s(),g=()=>{let o=i(),{url:s}=a(),g=t(e=>e.getArticleByUrl),_=t(e=>e.updateArticle),v=s?decodeURIComponent(s):``,y=g(v),{register:b,handleSubmit:x,setValue:S,getValues:C,formState:{errors:w,isSubmitting:T}}=c({resolver:l(d),mode:`onBlur`,defaultValues:y?{title:y.title||``,description:y.description||``,urlToImage:y.urlToImage||``,category:y.category||``}:void 0});(0,m.useEffect)(()=>{y||o(`/products`)},[y,o]);let E=C(`category`),D=y?.source?.id===`custom`;return y?(0,h.jsxs)(r,{children:[(0,h.jsx)(n,{items:[{label:`Home`,href:`/`},{label:`Products`,href:`/products`},{label:`Edit Product`}]}),(0,h.jsxs)(`div`,{className:`max-w-2xl mx-auto`,children:[(0,h.jsxs)(`div`,{className:`mb-6`,children:[(0,h.jsx)(`h2`,{className:`text-2xl font-semibold mb-2`,children:`Edit Article`}),(0,h.jsx)(`p`,{className:`text-gray-600`,children:`Update the article information below`})]}),(0,h.jsxs)(`div`,{className:`space-y-6`,children:[(0,h.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[(0,h.jsxs)(`label`,{htmlFor:`category`,className:`text-sm font-medium`,children:[`Category`,` `,!D&&(0,h.jsx)(`span`,{className:`text-gray-500`,children:`(read-only)`})]}),(0,h.jsx)(`div`,{className:D?``:`opacity-50 pointer-events-none`,children:(0,h.jsx)(e,{value:E,onValueChange:e=>S(`category`,e,{shouldValidate:!0}),useStore:!1})}),w.category&&(0,h.jsx)(`p`,{className:`text-sm text-red-500`,children:w.category.message})]}),(0,h.jsx)(u,{id:`title`,label:`Title`,required:!0,placeholder:`Enter article title (max 128 characters)`,register:b,error:w.title?.message}),(0,h.jsx)(f,{id:`description`,label:`Description`,required:!0,placeholder:`Enter article description (max 1024 characters)`,rows:6,register:b,error:w.description?.message}),(0,h.jsx)(u,{id:`urlToImage`,label:`Image URL`,required:!0,type:`url`,placeholder:`https://example.com/image.jpg`,register:b,error:w.urlToImage?.message}),(0,h.jsxs)(`div`,{className:`flex items-center gap-4 pt-4`,children:[(0,h.jsx)(p,{onClick:x(async e=>{y&&(_(v,{...y,title:e.title,description:e.description,urlToImage:e.urlToImage,category:D?e.category:y.category,content:e.description}),o(`/products`))}),disabled:T,className:`flex-1`,children:T?`Saving...`:`Save Changes`}),(0,h.jsx)(p,{variant:`outline`,onClick:()=>o(`/products`),className:`flex-1`,children:`Cancel`})]})]})]})]}):null};export{g as default};